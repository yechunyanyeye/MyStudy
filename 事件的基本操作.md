### 事件的基本操作

------



什么是事件 ?

​       事件是指 发生某种与DOM元素 ,` Document` 对象或` Window`对象有关的预定义或者自定义的时候或契机 ,这些契机通常是预定义的 ,并且程序上依赖他们.以关联这些契机发生时候的功能代码 .



2点重要的 :

1. 与DOM元素 , ` Document`对象,` Window`对象其中之一有关系的 .
2. 通常是预定义的.



事件类型 : 字符串 ,说明事件的类型 .

事件目标 : 指事件发生在了哪个对象上 .

事件处理程序 : 事件发生时执行的程序( 也叫  事件监听程序)

事件对象 :  保存着与事件相关的信息.

事件流 : 事件是如何传播的 



如何触发事件 ?

* HTML内联属性 , HTML事件

  * ``` html
    <input type="button" value="Click Me" onclick="alert('Clicked')" />
    ```

* 属性事件(   `DOM0` 事件    )

  * ``` js
    var btn=document.getElementById("myBtn");
    btn.onclick = function (){
        alert("Clicked");
    }
    ```

  

* 事件监听回调  (  `DOM2`事件)



是否支持上述3种触发方法 ?

1. DOM ,3 种都支持
2. ` Document` 类型支持 ,属性事件和监听事件.
3. ` Window`对象 , 3种都支持 .



#### HTML事件

------

* `<input type="button" value="Click Me" onclick="alert('Clicked')" />`

* 通常是 ` on-` 加上事件名称 ,后面跟上` js`代码 .

* ` onclick`后面如果跟函数的话 ,要写括号的 .

  * 双引号里面包括的是事件触发后 ,要执行的` js`代码 ,所以写函数名的话 ,要带上括号 . 

* 注意点 :

  * ` js`代码里面 ,不能带有特殊字符  (  & , " ", < , >   ) , 使用要转义.
  * 双引号里面的`js`代码 ,作用域是全局作用域.
  * HTML事件创建时 ,对应的函数创建局部变量 , ` event`.
  * ` this`指向触发事件的DOM元素.
  * ` setAttribute()` 可以对HTML事件里面的代码进行修改的.

* 缺点 :

  * 时间差问题 .
  * 不同浏览器上可能会出问题
  * 代码上的耦合度. 如果更改需求 , 改代码比较麻烦 .

  



#### `DOM0`级事件

------

* 增加事件
  * 获取元素
  * 给属性赋值 (  属性都是 小写 )
  * ` this`指针指向当前元素 
  * ` event`对象也是在当前函数里面默认存在的 .
* 删除事件
  * 直接把事件属性赋值为` null`.
* 节点复制
  * 事件也会被复制一份 , 但两个事件不是同一个引用
* 优点:
  * 解决了HTML事件存在的问题
* 缺点
  * 一次只能指定一个事件处理程序





#### ` DOM2`级事件

------

* 3个阶段

  * 事件捕获
  * 事件目标
  * 事件冒泡

* ` this`指针指向当前元素.

* ` addEventListener()` 

  * 添加事件

  * 3个参数 ,事件名称 (没有on)  ,事件处理函数 ,布尔值 (true表示事件处理程序在捕获阶段执行 ,false冒泡阶段执行)

  * ``` js
    var btn = document.getElementById("myBtn");
    btn.addEventLisener("click",function(){
        alert(this.id);
    },false);
    ```

  * 第三个参数可以是对象,但是都是布尔值. 

* ` removeEventListener()`  

  * 删除事件
  * 3个参数 ,事件名称 (没有on)  ,事件处理函数 ,布尔值 (true表示事件处理程序在捕获阶段执行 ,false冒泡阶段执行)
  * 删除的那个函数和添加的那个函数必须是指向同一个引用.







#### 事件流

------



事件从什么地方到什么地方的流动方向叫事件流 .



##### 事件冒泡

* 当对一个元素进行处理的时候 ,从最具体的元素逐级往上级传播 ,直到一个不具体的 (一般是` document`).



##### 事件捕获

* 从不太具体的节点到具体的节点 
* 意义 :事件到达预定目标之前捕获它 .
* 事实上 ,是从` Windows` 开始捕获的 .(不是` document`) 



##### IE自己的事件流方法    (了解)

*  基于事件冒泡
* 只有旧版有 !  
* `attachEvent()`    两个参数 ,第一个是事件名称 , 第二个是事件处理函数 .  
  * 事件处理函数里面` this`指向` window`
  * 执行是按照写的顺序相反的方向执行  
* ` detachEvent()` 
  * 删除函数和添加函数必须是同一个引用



